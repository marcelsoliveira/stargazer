(this.webpackJsonpstargazer=this.webpackJsonpstargazer||[]).push([[0],{28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},53:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),r=a(8),o=a.n(r),s=(a(28),a(3)),c=a(4),u=a(2),h=a(6),l=a(5),m=(a(29),a(30),a(10)),p=a.n(m),d=a(21),b=a(22),g=a.n(b),f=function(e){Object(h.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).fetchImage=e.fetchImage.bind(Object(u.a)(e)),e}return Object(c.a)(a,[{key:"fetchImage",value:function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.nasa.gov/planetary/apod?","api_key=DaFi4M1aSffvFg0EGzfCxWruc6FyhR7wStWMPtxf&",a="https://api.nasa.gov/planetary/apod?api_key=DaFi4M1aSffvFg0EGzfCxWruc6FyhR7wStWMPtxf&"+("date="+t+"&"),e.next=7,g.a.get(a).then((function(e){n.props.spaceData(e.data)})).catch((function(e){console.log(e),n.props.onError()}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return null}}]),a}(i.a.Component),j=(a(50),a(51),a(0)),v=function(e){Object(h.a)(a,e);var t=Object(l.a)(a);function a(){return Object(s.a)(this,a),t.call(this)}return Object(c.a)(a,[{key:"render",value:function(){return Object(j.jsx)("div",{className:"stars"})}}]),a}(i.a.Component),I=a.p+"static/media/loader.f967940b.svg",O=function(e){Object(h.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={imageUrl:"",image:null,imageLoaded:!1},e.backgroundImage=i.a.createRef(),e.receive=e.receive.bind(Object(u.a)(e)),e.unloadImage=e.unloadImage.bind(Object(u.a)(e)),e}return Object(c.a)(a,[{key:"receive",value:function(e){this.setState({imageLoaded:!1},(function(){this.setState({imageUrl:e})}))}},{key:"unloadImage",value:function(){this.setState({imageLoaded:!1})}},{key:"handleImageLoaded",value:function(){var e=this;setTimeout((function(){e.setState({imageLoaded:!0}),setTimeout((function(){e.props.revealTitle()}),1e3)}),2e3)}},{key:"render",value:function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)(v,{}),Object(j.jsx)("img",{ref:this.backgroundImage,src:this.state.imageUrl,className:this.state.imageLoaded?"image":"image image-hidden",onLoad:this.handleImageLoaded.bind(this)}),Object(j.jsx)("div",{className:"vignette"}),Object(j.jsx)("img",{src:I,className:this.state.imageLoaded?"loader-container-hidden loader-container":"loader-container"})]})}}]),a}(i.a.Component),x=a(61),y=(a(53),function(e){Object(h.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={showImageInfo:!1},e.processAuthorData=e.processAuthorData.bind(Object(u.a)(e)),e.unmountImageInfo=e.unmountImageInfo.bind(Object(u.a)(e)),e}return Object(c.a)(a,[{key:"processAuthorData",value:function(){return void 0===this.props.author?"Unknown":this.props.author}},{key:"processExplanation",value:function(){return this.props.explanation.split(".").slice(0,3)+"."}},{key:"revealImageInfo",value:function(){this.setState({showImageInfo:!0})}},{key:"unmountImageInfo",value:function(){this.setState({showImageInfo:!1})}},{key:"render",value:function(){return Object(j.jsx)(x.a,{in:this.state.showImageInfo,apper:!0,timeout:1e3,classNames:"info-container-transition",unmountOnExit:!0,children:Object(j.jsxs)("div",{className:"info-container",children:[Object(j.jsx)("div",{className:"title-container",children:this.props.title}),Object(j.jsxs)("div",{className:"author-container",children:["by ",this.processAuthorData()]}),Object(j.jsx)("div",{className:"explanation-container",children:this.processExplanation()})]})})}}]),a}(i.a.Component)),k=(a(56),a(57),function(e){Object(h.a)(a,e);var t=Object(l.a)(a);function a(){return Object(s.a)(this,a),t.call(this)}return Object(c.a)(a,[{key:"render",value:function(){return Object(j.jsx)("div",{className:"buttom-container",onClick:this.props.onClick,children:Object(j.jsx)("img",{src:this.props.icon,className:"buttom-icon"})})}}]),a}(i.a.Component)),S=(a(58),function(e){Object(h.a)(a,e);var t=Object(l.a)(a);function a(){return Object(s.a)(this,a),t.call(this)}return Object(c.a)(a,[{key:"render",value:function(){return Object(j.jsx)("div",{className:"pie-timer-container",onClick:this.props.onClick,children:Object(j.jsx)("div",{class:"pie-chart"})})}}]),a}(i.a.Component)),w=a.p+"static/media/next.e0aeb687.svg",T=a.p+"static/media/previous.86c62d6c.svg",N=a.p+"static/media/share.b62d9add.svg",U=function(e){Object(h.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={showToolbar:!1},e.revealToolbar=e.revealToolbar.bind(Object(u.a)(e)),e.unmountToolbar=e.unmountToolbar.bind(Object(u.a)(e)),e}return Object(c.a)(a,[{key:"revealToolbar",value:function(){this.setState({showToolbar:!0})}},{key:"unmountToolbar",value:function(){this.setState({showToolbar:!1})}},{key:"render",value:function(){return Object(j.jsx)(x.a,{in:this.state.showToolbar,apper:!0,timeout:1e3,classNames:"tool-bar-container-transition",unmountOnExit:!0,children:Object(j.jsxs)("div",{className:"tool-bar-container",children:[Object(j.jsx)(k,{icon:N,onClick:this.props.onShare}),Object(j.jsx)(k,{icon:w,onClick:this.props.onNextImage}),Object(j.jsx)(k,{icon:T,onClick:this.props.onPreviousImage}),Object(j.jsx)(S,{})]})})}}]),a}(i.a.Component),C=(a(59),a.p+"static/media/communication-error.75b0db60.svg"),L=function(e){Object(h.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={showPopUp:!1},e.showErrorPopUp=e.showErrorPopUp.bind(Object(u.a)(e)),e}return Object(c.a)(a,[{key:"showErrorPopUp",value:function(){this.setState({showPopUp:!0})}},{key:"hideErrorPopUp",value:function(){this.setState({showPopUp:!1})}},{key:"render",value:function(){return Object(j.jsx)(x.a,{in:this.state.showPopUp,apper:!0,timeout:1e3,classNames:"pop-up-container-transition",unmountOnExit:!0,children:Object(j.jsxs)("div",{className:"pop-up-container",children:[Object(j.jsx)("div",{children:Object(j.jsx)("img",{src:C,className:"pop-up-icon"})}),Object(j.jsx)("div",{className:"pop-up-text",children:"It was not possible to reach the remote service. Please try again."}),Object(j.jsx)("div",{className:"pop-up-button",onClick:this.props.onRetry,children:"Retry"})]})})}}]),a}(i.a.Component),D=a.p+"static/media/stargazer_logo.b9812c09.svg",P=function(e){Object(h.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={title:"",author:"",explanation:"",imageURL:"",unmountUI:!0,nextImageTimeout:null,visitedImageList:[],errorHappend:!1,curentImage:0},e.fetcher=i.a.createRef(),e.image=i.a.createRef(),e.imageInfo=i.a.createRef(),e.toolBar=i.a.createRef(),e.errorPopUp=i.a.createRef(),e.receiveSpaceData=e.receiveSpaceData.bind(Object(u.a)(e)),e.revealImageInfoAndToolbar=e.revealImageInfoAndToolbar.bind(Object(u.a)(e)),e.nextImage=e.nextImage.bind(Object(u.a)(e)),e.requestNewImage=e.requestNewImage.bind(Object(u.a)(e)),e.startNextImageTimeOut=e.startNextImageTimeOut.bind(Object(u.a)(e)),e.unloadUi=e.unloadUi.bind(Object(u.a)(e)),e.share=e.share.bind(Object(u.a)(e)),e.requestNewImage=e.requestNewImage.bind(Object(u.a)(e)),e.previousImage=e.previousImage.bind(Object(u.a)(e)),e.handleError=e.handleError.bind(Object(u.a)(e)),e.retryConnection=e.retryConnection.bind(Object(u.a)(e)),e.retry=e.retry.bind(Object(u.a)(e)),e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.fetcher.current.fetchImage("2020-08-23"),this.state.visitedImageList.push("2020-08-23")}},{key:"receiveSpaceData",value:function(e){this.image.current.receive(e.url),this.setState({title:e.title}),this.setState({author:e.copyright}),this.setState({explanation:e.explanation}),this.setState({imageURL:e.url}),this.setState({isImageInfoMounted:!0})}},{key:"handleError",value:function(){this.setState({errorHappend:!0},(function(){this.errorPopUp.current.showErrorPopUp()}))}},{key:"retryConnection",value:function(){var e=this;this.errorPopUp.current.hideErrorPopUp(),setTimeout((function(){e.setState({errorHappend:!1}),e.retry()}),1e3)}},{key:"retry",value:function(){this.setState({curentImage:0}),this.state.visitedImageList=[],this.fetcher.current.fetchImage("2020-08-23"),this.state.visitedImageList.push("2020-08-23")}},{key:"nextImage",value:function(){var e=this;this.unloadUi(),setTimeout((function(){e.setState({unmountUI:!1}),e.requestNewImage()}),1e3)}},{key:"previousImage",value:function(){var e=this;this.state.curentImage>0&&(this.unloadUi(),setTimeout((function(){e.setState({unmountUI:!1}),e.requestPreviousImage()}),1e3))}},{key:"unloadUi",value:function(){clearTimeout(this.state.nextImageTimeout),this.image.current.unloadImage(),this.imageInfo.current.unmountImageInfo(),this.toolBar.current.unmountToolbar()}},{key:"requestNewImage",value:function(){var e=new Date(2015,0,1),t=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDay()),a=new Date(e.getTime()+Math.random()*(t.getTime()-e.getTime()));this.updateVisitedImageList(a),this.fetcher.current.fetchImage(String(a.getFullYear())+"-"+String(a.getMonth()+1)+"-"+String(a.getDay()+1))}},{key:"requestPreviousImage",value:function(){console.log(this.state.visitedImageList),this.state.curentImage>0&&(this.fetcher.current.fetchImage(this.state.visitedImageList[this.state.curentImage-1]),this.state.visitedImageList.pop())}},{key:"updateVisitedImageList",value:function(e){this.setState({curentImage:this.state.curentImage+1}),this.state.visitedImageList.push(String(e.getFullYear())+"-"+String(e.getMonth()+1)+"-"+String(e.getDay()+1))}},{key:"revealImageInfoAndToolbar",value:function(){this.setState({unmountUI:!0}),this.imageInfo.current.revealImageInfo(),this.toolBar.current.revealToolbar(),this.startNextImageTimeOut()}},{key:"startNextImageTimeOut",value:function(){var e=this;this.setState({nextImageTimeout:setTimeout((function(){e.nextImage()}),59e3)})}},{key:"share",value:function(){window.location.assign("mailto:?subject="+this.state.title+"&body="+this.state.explanation+" Check it out: "+this.state.imageURL)}},{key:"render",value:function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)(f,{ref:this.fetcher,spaceData:this.receiveSpaceData,onError:this.handleError}),Object(j.jsx)(O,{ref:this.image,revealTitle:this.revealImageInfoAndToolbar}),this.state.unmountUI&&Object(j.jsx)(y,{ref:this.imageInfo,title:this.state.title,author:this.state.author,explanation:this.state.explanation}),this.state.unmountUI&&Object(j.jsx)(U,{ref:this.toolBar,onNextImage:this.nextImage,onShare:this.share,onPreviousImage:this.previousImage}),this.state.errorHappend&&Object(j.jsx)(L,{ref:this.errorPopUp,onRetry:this.retryConnection}),Object(j.jsx)("img",{src:D,className:"logo"})]})}}]),a}(i.a.Component);var E=function(){return Object(j.jsx)("div",{className:"App",children:Object(j.jsx)(P,{})})},R=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,62)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,r=t.getLCP,o=t.getTTFB;a(e),n(e),i(e),r(e),o(e)}))};o.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(E,{})}),document.getElementById("root")),R()}},[[60,1,2]]]);
//# sourceMappingURL=main.3f011248.chunk.js.map